# Event Dispatch Thread (EDT) –≤ Swing

## 1. –ß—Ç–æ —Ç–∞–∫–æ–µ Event Dispatch Thread (EDT)?
`Event Dispatch Thread` (EDT) ‚Äî —ç—Ç–æ **–≥–ª–∞–≤–Ω—ã–π –ø–æ—Ç–æ–∫ –æ–±—Ä–∞–±–æ—Ç–∫–∏ —Å–æ–±—ã—Ç–∏–π –≤ Swing**. –û–Ω –æ—Ç–≤–µ—á–∞–µ—Ç –∑–∞:
- –û–±—Ä–∞–±–æ—Ç–∫—É –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏—Ö —Å–æ–±—ã—Ç–∏–π (–∫–ª–∏–∫–∏, –≤–≤–æ–¥ —Å –∫–ª–∞–≤–∏–∞—Ç—É—Ä—ã, –ø–µ—Ä–µ–º–µ—â–µ–Ω–∏–µ –º—ã—à–∏).
- –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –≥—Ä–∞—Ñ–∏—á–µ—Å–∫–æ–≥–æ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞.
- –í—ã–∑–æ–≤—ã –º–µ—Ç–æ–¥–æ–≤ `paintComponent()` –∏ `repaint()`.

**Swing –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –æ–¥–Ω–æ–Ω–∏—Ç–µ–≤—É—é –º–æ–¥–µ–ª—å**, –ø–æ—ç—Ç–æ–º—É –≤—Å–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è UI **–¥–æ–ª–∂–Ω—ã –≤—ã–ø–æ–ª–Ω—è—Ç—å—Å—è –≤ EDT**, —á—Ç–æ–±—ã –∏–∑–±–µ–∂–∞—Ç—å –ø—Ä–æ–±–ª–µ–º —Å –º–Ω–æ–≥–æ–ø–æ—Ç–æ—á–Ω–æ—Å—Ç—å—é.

---

## 2. –ü–æ—á–µ–º—É –≤–∞–∂–Ω–æ –æ–±–Ω–æ–≤–ª—è—Ç—å –≥—Ä–∞—Ñ–∏–∫—É –≤ EDT?
–ï—Å–ª–∏ –æ–±–Ω–æ–≤–ª—è—Ç—å UI **–∏–∑ –¥—Ä—É–≥–æ–≥–æ –ø–æ—Ç–æ–∫–∞**, –º–æ–≥—É—Ç –≤–æ–∑–Ω–∏–∫–Ω—É—Ç—å —Å–ª–µ–¥—É—é—â–∏–µ –ø—Ä–æ–±–ª–µ–º—ã:
1. **–ì–æ–Ω–∫–∞ –ø–æ—Ç–æ–∫–æ–≤ (`Race Condition`)** ‚Äì –Ω–µ—Å–∫–æ–ª—å–∫–æ –ø–æ—Ç–æ–∫–æ–≤ –∏–∑–º–µ–Ω—è—é—Ç UI –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ, –≤—ã–∑—ã–≤–∞—è –Ω–µ–æ–∂–∏–¥–∞–Ω–Ω—ã–µ –æ—à–∏–±–∫–∏.
2. **–ê—Ä—Ç–µ—Ñ–∞–∫—Ç—ã –æ—Ç—Ä–∏—Å–æ–≤–∫–∏** ‚Äì –Ω–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ —ç–ª–µ–º–µ–Ω—Ç–æ–≤ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞.
3. **–ö—Ä–∞—à –ø—Ä–æ–≥—Ä–∞–º–º—ã** ‚Äì –ø–æ–ø—ã—Ç–∫–∞ –¥–æ—Å—Ç—É–ø–∞ –∫ UI-–∫–æ–º–ø–æ–Ω–µ–Ω—Ç—É –∏–∑ –¥—Ä—É–≥–æ–≥–æ –ø–æ—Ç–æ–∫–∞ –º–æ–∂–µ—Ç –ø—Ä–∏–≤–µ—Å—Ç–∏ –∫ `IllegalStateException`.

–ü—Ä–∏–º–µ—Ä **–ù–ï–ü–†–ê–í–ò–õ–¨–ù–û–ì–û** –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è UI –∏–∑ —Ñ–æ–Ω–æ–≤–æ–≥–æ –ø–æ—Ç–æ–∫–∞:
```java
new Thread(() -> {
    JFrame frame = new JFrame("Wrong EDT Example");
    frame.setSize(400, 300);
    frame.setVisible(true); // ‚ùå –û—à–∏–±–∫–∞! UI —Å–æ–∑–¥–∞–µ—Ç—Å—è –≤–Ω–µ EDT
}).start();
```

‚úÖ **–ò—Å–ø–æ–ª—å–∑—É–µ–º `SwingUtilities.invokeLater()` –¥–ª—è –±–µ–∑–æ–ø–∞—Å–Ω–æ–≥–æ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è UI.**

---

## 3. –ö–∞–∫ –ø—Ä–∞–≤–∏–ª—å–Ω–æ —Ä–∞–±–æ—Ç–∞—Ç—å —Å EDT?
### **1. –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ `SwingUtilities.invokeLater()`**
–ú–µ—Ç–æ–¥ `invokeLater()` —Å—Ç–∞–≤–∏—Ç –∑–∞–¥–∞—á—É –≤ –æ—á–µ—Ä–µ–¥—å EDT **–∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ**.
```java
SwingUtilities.invokeLater(() -> {
    JFrame frame = new JFrame("Correct EDT Example");
    frame.setSize(400, 300);
    frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    frame.setVisible(true);
});
```
‚úÖ **–ì–∞—Ä–∞–Ω—Ç–∏—Ä—É–µ—Ç, —á—Ç–æ –∫–æ–¥ –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –≤ EDT.**

### **2. –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ `SwingUtilities.invokeAndWait()`**
–ú–µ—Ç–æ–¥ `invokeAndWait()` —Å—Ç–∞–≤–∏—Ç –∑–∞–¥–∞—á—É –≤ –æ—á–µ—Ä–µ–¥—å EDT **—Å –æ–∂–∏–¥–∞–Ω–∏–µ–º –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è**.
```java
SwingUtilities.invokeAndWait(() -> {
    System.out.println("–≠—Ç–æ—Ç –∫–æ–¥ –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –≤ EDT –∏ –±–ª–æ–∫–∏—Ä—É–µ—Ç —Ç–µ–∫—É—â–∏–π –ø–æ—Ç–æ–∫!");
});
```
‚ö†Ô∏è **–ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Å –æ—Å—Ç–æ—Ä–æ–∂–Ω–æ—Å—Ç—å—é! –ú–æ–∂–µ—Ç –≤—ã–∑–≤–∞—Ç—å Deadlock, –µ—Å–ª–∏ –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è –∏–∑ EDT.**

### **3. –ü—Ä–æ–≤–µ—Ä–∫–∞, –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –ª–∏ –∫–æ–¥ –≤ EDT**
–ü–µ—Ä–µ–¥ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ–º –∫–æ–¥–∞ –º–æ–∂–Ω–æ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å, –Ω–∞—Ö–æ–¥–∏–º—Å—è –ª–∏ –º—ã –≤ EDT:
```java
if (SwingUtilities.isEventDispatchThread()) {
    System.out.println("–ö–æ–¥ –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –≤ EDT");
} else {
    System.out.println("–ö–æ–¥ –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –≤ –¥—Ä—É–≥–æ–º –ø–æ—Ç–æ–∫–µ");
}
```

---

## 4. –ö–∞–∫ –≤—ã–ø–æ–ª–Ω—è—Ç—å –¥–æ–ª–≥–∏–µ –∑–∞–¥–∞—á–∏, –Ω–µ –±–ª–æ–∫–∏—Ä—É—è EDT?
–ï—Å–ª–∏ –≤—ã–ø–æ–ª–Ω–∏—Ç—å **—Ç—è–∂—ë–ª—É—é –æ–ø–µ—Ä–∞—Ü–∏—é** –≤ EDT (–Ω–∞–ø—Ä–∏–º–µ—Ä, –∑–∞–≥—Ä—É–∑–∫—É –¥–∞–Ω–Ω—ã—Ö), UI **–∑–∞–≤–∏—Å–Ω–µ—Ç**.

### ‚ùå **–ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –ø—Ä–∏–º–µ—Ä (UI –∑–∞–≤–∏—Å–Ω–µ—Ç)**
```java
button.addActionListener(e -> {
    for (int i = 0; i < 1_000_000_000; i++); // –ò–º–∏—Ç–∞—Ü–∏—è –¥–æ–ª–≥–æ–π —Ä–∞–±–æ—Ç—ã
    System.out.println("–ó–∞–≥—Ä—É–∑–∫–∞ –∑–∞–≤–µ—Ä—à–µ–Ω–∞!");
});
```
‚úÖ –ò—Å–ø–æ–ª—å–∑—É–µ–º `SwingWorker` –¥–ª—è —Ñ–æ–Ω–æ–≤—ã—Ö –æ–ø–µ—Ä–∞—Ü–∏–π.

### ‚úÖ **–ü—Ä–∞–≤–∏–ª—å–Ω—ã–π –ø—Ä–∏–º–µ—Ä —Å `SwingWorker`**
```java
SwingWorker<Void, Void> worker = new SwingWorker<>() {
    @Override
    protected Void doInBackground() throws Exception {
        Thread.sleep(3000); // –ò–º–∏—Ç–∞—Ü–∏—è –∑–∞–≥—Ä—É–∑–∫–∏ –¥–∞–Ω–Ω—ã—Ö
        return null;
    }
    
    @Override
    protected void done() {
        System.out.println("–ó–∞–≥—Ä—É–∑–∫–∞ –∑–∞–≤–µ—Ä—à–µ–Ω–∞!");
    }
};
worker.execute();
```
‚úÖ `doInBackground()` –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è **–≤ —Ñ–æ–Ω–æ–≤–æ–º –ø–æ—Ç–æ–∫–µ**.
‚úÖ `done()` –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è **–≤ EDT** –¥–ª—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è UI.

---

## 5. –ò—Ç–æ–≥
- **EDT —É–ø—Ä–∞–≤–ª—è–µ—Ç –≤—Å–µ–º–∏ –æ–ø–µ—Ä–∞—Ü–∏—è–º–∏ —Å UI –≤ Swing.**
- **–ù–µ–ª—å–∑—è –æ–±–Ω–æ–≤–ª—è—Ç—å UI –∏–∑ –¥—Ä—É–≥–∏—Ö –ø–æ—Ç–æ–∫–æ–≤.**
- **–ò—Å–ø–æ–ª—å–∑—É–µ–º `SwingUtilities.invokeLater()` –¥–ª—è –±–µ–∑–æ–ø–∞—Å–Ω–æ–≥–æ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è UI.**
- **–¢—è–∂—ë–ª—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ –≤—ã–ø–æ–ª–Ω—è–µ–º –≤ `SwingWorker`, —á—Ç–æ–±—ã –Ω–µ –±–ª–æ–∫–∏—Ä–æ–≤–∞—Ç—å UI.**

üöÄ **–¢–µ–ø–µ—Ä—å —Ç—ã –∑–Ω–∞–µ—à—å, –∫–∞–∫ –ø—Ä–∞–≤–∏–ª—å–Ω–æ —Ä–∞–±–æ—Ç–∞—Ç—å —Å EDT –∏ –∏–∑–±–µ–≥–∞—Ç—å –æ—à–∏–±–æ–∫ –≤ Swing!**

