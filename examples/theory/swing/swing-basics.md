# Swing в Java – Полный Разбор

## 1. Что такое Swing?
Swing — это мощная библиотека для создания графического интерфейса пользователя (GUI) в Java. Она основана на AWT, но в отличие от него использует легковесные компоненты, которые рисуются средствами самой Java, а не зависят от нативных оконных элементов операционной системы.

### Основные особенности Swing:
- Полностью написана на Java, что делает её кроссплатформенной.
- Легковесные компоненты позволяют добиться гибкости и единообразного внешнего вида на разных ОС.
- Поддерживает MVC (Model-View-Controller) архитектуру.
- Позволяет изменять внешний вид (Pluggable Look & Feel).
- Работает в Event Dispatch Thread (EDT), обеспечивая потокобезопасность.

## 2. Тяжеловесные vs Легковесные компоненты

### Тяжеловесные компоненты (AWT):
- Используют нативные оконные элементы.
- Менее гибкие и зависят от операционной системы.
- Не поддерживают наложение друг на друга.

### Легковесные компоненты (Swing):
- Рисуются средствами Java без использования ОС.
- Гибкие, поддерживают наложение и прозрачность.
- Работают быстрее и обеспечивают лучшую производительность.

## 3. Архитектура Swing
Swing построен на принципе **Model-View-Controller (MVC)**, но использует **Model-Delegate** (объединяет View и Controller в одном объекте).

### Основные архитектурные принципы:
- **MVC**: разделение данных, отображения и логики обработки событий.
- **Двойная буферизация**: предотвращает мерцание при обновлении графики.
- **Работа в Event Dispatch Thread (EDT)**: управление обновлениями UI в отдельном потоке.

## 4. MVC в Swing
В Swing классическая схема MVC модифицирована:
- **Model** — управляет данными (например, `TableModel` для таблиц).
- **View + Controller** — объединены в одном объекте, отвечающем за отображение и обработку событий.

### Примеры MVC в Swing:
- `JTable`: данные управляются `TableModel`, а `JTable` одновременно отображает их и обрабатывает клики.
- `JTextField`: текст хранится в `Document`, а `JTextField` отвечает за ввод и отображение.

## 5. Event Dispatch Thread (EDT)

### Зачем нужен EDT?
- EDT управляет всеми обновлениями UI, предотвращая гонки потоков.
- Изменение UI вне EDT может привести к некорректному отображению или ошибкам.
- Используем `SwingUtilities.invokeLater()` для безопасного изменения UI.

### Как правильно работать с EDT?
```java
SwingUtilities.invokeLater(() -> {
    JFrame frame = new JFrame("EDT Example");
    frame.setSize(400, 300);
    frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    frame.setVisible(true);
});
```

## 6. Методы paint() и repaint()

### `paintComponent(Graphics g)` — отрисовка компонента
- Используется для кастомного рисования.
- Всегда вызываем `super.paintComponent(g)` для корректного обновления.

### `repaint()` — запрос на перерисовку
- Запускает `paintComponent()`, но не вызывает его напрямую.
- Используется для обновления интерфейса.
- Можно обновлять только часть компонента: `repaint(x, y, width, height)`.

Пример:
```java
@Override
protected void paintComponent(Graphics g) {
    super.paintComponent(g);
    g.setColor(Color.BLUE);
    g.fillOval(50, 50, 100, 100);
}
```

## 7. Двойная буферизация (Double Buffering)

### Что это такое?
Двойная буферизация предотвращает мерцание при рисовании: сначала изображение рисуется в памяти, а затем переносится на экран.

### Как она работает в Swing?
- Включена по умолчанию для всех `JComponent`.
- Можно проверить: `panel.isDoubleBuffered()`.
- Можно включить вручную: `panel.setDoubleBuffered(true);`